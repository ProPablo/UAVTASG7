{% extends "base.html" %}

{% block content %}
<ul class="images-list list-group list-group-flush">
  {% for result in results %}
  <li class="list-group-item">
    <img src="{{ result.file_path }}" tabindex="0" class="img-fluid" data-bs-toggle="popover"
      title="{{ result.timestamp }}" data-bs-content=' 
      <div class="">
        <h6 class="fw-bold">Detected:</h6>
        <ul class="list-group">
        {% for obj in result.obj %}
          <li class="list-group-item">
          {{ obj.name }} ({{obj.score}})
          </li>
        {% endfor %}
        </ul>
      </div>
      '>
  </li>

  <!-- <li class="list-group-item">{{ result[0] }}</li> -->
  {% endfor %}

</ul>

<script>
  $('ul.images-list').children('li').each((i, el)=> {
    const img = $(el).find('img');
    
    let title = Number.parseFloat(img.attr("title"));
    title = `Image: ${new Date(title).toString()}`;
    img.attr("title", title);
    var popover = new bootstrap.Popover(img, {
        html: true,
        trigger: 'focus',
        content: img.attr("data-bs-content") 
      });
  })

</script>

{% endblock %}